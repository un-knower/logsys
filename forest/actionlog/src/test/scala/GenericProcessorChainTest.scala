import cn.whaley.bi.logsys.common.ConfManager
import cn.whaley.bi.logsys.forest.GenericProcessorChain
import org.junit.Test

import scala.collection.mutable.ArrayBuffer

/**
 * Created by fj on 16/11/17.
 */
class GenericProcessorChainTest {

    @Test
    def testProcessor: Unit = {
        val chain = new GenericProcessorChain()
        val confManager = new ConfManager(Array("GenericProcessorChain.xml"))
        chain.init(confManager)


        val stream = this.getClass.getClassLoader.getResourceAsStream("boikgpokn78sb95kjhfrendoj8ilnoi7.log")
        val source = scala.io.Source.fromInputStream(stream)
        val filelines = source.getLines().toArray
        val lines = new ArrayBuffer[String]()
        for (i <- 0 to 0) {
            lines.append(filelines: _*)
        }

        val from = System.currentTimeMillis()

        for (i <- 0 to 0) {

            val from2 = System.currentTimeMillis()

            val result =
                lines.flatMap(item => {
                    val bytes = item.getBytes
                    val ret = chain.process(bytes)
                    if (ret.hasErr) {
                        if (ret.ex.isDefined) {
                            ret.ex.get.printStackTrace()
                        }
                    }
                    require(ret.hasErr == false)

                    //println(ret.result.get.length)

                    ret.result.get.foreach(item=>println(item.toJSONString))
                    println("")

                    ret.result.get

                })

            println(s"${i}:ts:${System.currentTimeMillis() - from2},${result.length}")

        }

        println(s"${lines.length}:ts:${System.currentTimeMillis() - from}")

    }

    @Test
    def testMsg3():Unit={
        val msgText="{\"@timestamp\":\"2017-05-11T08:37:43.949Z\",\"message\":\"{\\\"msgId\\\":\\\"AAABW/VYJgYKE7pKHph7tQAB\\\",\\\"msgVersion\\\":\\\"1.0\\\",\\\"msgSite\\\":\\\"10.19.186.74\\\",\\\"msgSource\\\":\\\"ngx_log\\\",\\\"msgFormat\\\":\\\"json\\\",\\\"msgSignFlag\\\":0,\\\"msgBody\\\":{\\\"svr_host\\\":\\\"videolog.aginomoto.com\\\",\\\"svr_req_method\\\":\\\"POST\\\",\\\"svr_req_url\\\":\\\"/videolog/?net\\\",\\\"svr_content_type\\\":\\\"application/json\\\",\\\"svr_remote_addr\\\":\\\"10.10.251.81\\\",\\\"svr_forwarded_for\\\":\\\"61.159.10.7\\\",\\\"svr_receive_time\\\":1494469846534,\\\"appId\\\":\\\"boikgpokn78sb95kjhfrendo8dc5mlsr\\\",\\\"body\\\":\\\\x22productSN\\\\x5C\\\\x22:\\\\x5C\\\\x22KB1650BB002448O0A6\\\\x5C\\\\x22,\\\\x5C\\\\x22event\\\\x5C\\\\x22:\\\\x5C\\\\x22view\\\\x5C\\\\x22,\\\\x5C\\\\x22searchResultIndex\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22romVersion\\\\x5C\\\\x22:\\\\x5C\\\\x2201.24.04\\\\x5C\\\\x22,\\\\x5C\\\\x22contentType\\\\x5C\\\\x22:\\\\x5C\\\\x22tv\\\\x5C\\\\x22,\\\\x5C\\\\x22hotSearchWord\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22mark\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22videoSid\\\\x5C\\\\x22:\\\\x5C\\\\x22g68sacc3hjb2\\\\x5C\\\\x22,\\\\x5C\\\\x22recommendType\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22searchText\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22path\\\\x5C\\\\x22:\\\\x5C\\\\x22home-watching_history\\\\x5C\\\\x22,\\\\x5C\\\\x22accountId\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22productLine\\\\x5C\\\\x22:\\\\x5C\\\\x22helios\\\\x5C\\\\x22,\\\\x5C\\\\x22productModel\\\\x5C\\\\x22:\\\\x5C\\\\x22WTV43K1\\\\x5C\\\\x22,\\\\x5C\\\\x22weatherCode\\\\x5C\\\\x22:\\\\x5C\\\\x22101020100\\\\x5C\\\\x22,\\\\x5C\\\\x22sysPlatform\\\\x5C\\\\x22:\\\\x5C\\\\x22yunos\\\\x5C\\\\x22},{\\\\x5C\\\\x22userId\\\\x5C\\\\x22:\\\\x5C\\\\x2295d61fccd505fba4eb4e2431ea502f8b\\\\x5C\\\\x22,\\\\x5C\\\\x22vipLevel\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22episodeSid\\\\x5C\\\\x22:\\\\x5C\\\\x22g6acxzfh3fcd\\\\x5C\\\\x22,\\\\x5C\\\\x22videoType\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22stationSid\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22stationName\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22episodeName\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22retrieval\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22parentBrandSid \\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22logStatus\\\\x5C\\\\x22:\\\\x5C\\\\x22recovery\\\\x5C\\\\x22,\\\\x5C\\\\x22searchTab\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22omnibusName\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22firmwareVersion\\\\x5C\\\\x22:\\\\x5C\\\\x22HELIOSR-01.24.04.1707312\\\\x5C\\\\x22,\\\\x5C\\\\x22matchSid\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22episodeBelong\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22starName\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22event\\\\x5C\\\\x22:\\\\x5C\\\\x22errorexit\\\\x5C\\\\x22,\\\\x5C\\\\x22stationListName\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22contentType\\\\x5C\\\\x22:\\\\x5C\\\\x22tv\\\\x5C\\\\x22,\\\\x5C\\\\x22playStatus\\\\x5C\\\\x22:\\\\x5C\\\\x22success\\\\x5C\\\\x22,\\\\x5C\\\\x22hotSearchWord\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22starSid \\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22accessArea\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22parentListName\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22searchText\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22topRankSid\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22productLine\\\\x5C\\\\x22:\\\\x5C\\\\x22helios\\\\x5C\\\\x22,\\\\x5C\\\\x22sysPlatform\\\\x5C\\\\x22:\\\\x5C\\\\x22yunos\\\\x5C\\\\x22,\\\\x5C\\\\x22matchName\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22pathSub\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22logType\\\\x5C\\\\x22:\\\\x5C\\\\x22play\\\\x5C\\\\x22,\\\\x5C\\\\x22playSource\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22duration\\\\x5C\\\\x22:\\\\x5C\\\\x22246\\\\x5C\\\\x22,\\\\x5C\\\\x22videoName\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22accessLocation\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22recommendLocation\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22logVersion\\\\x5C\\\\x22:\\\\x5C\\\\x2201\\\\x5C\\\\x22,\\\\x5C\\\\x22groupId\\\\x5C\\\\x22:\\\\x5C\\\\x2215891\\\\x5C\\\\x22,\\\\x5C\\\\x22androidVersion\\\\x5C\\\\x22:\\\\x5C\\\\x2221\\\\x5C\\\\x22,\\\\x5C\\\\x22currentVipLevel\\\\x5C\\\\x22:\\\\x5C\\\\x22NONE\\\\x5C\\\\x22,\\\\x5C\\\\x22searchAssociationalWord\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22happenTime\\\\x5C\\\\x22:\\\\x5C\\\\x2220170331122355\\\\x5C\\\\x22,\\\\x5C\\\\x22topRankName\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22uploadTime\\\\x5C\\\\x22:\\\\x5C\\\\x2220170331122411\\\\x5C\\\\x22,\\\\x5C\\\\x22productSN\\\\x5C\\\\x22:\\\\x5C\\\\x22KB1650BB002448O0A6\\\\x5C\\\\x22,\\\\x5C\\\\x22parentSubjectSid\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22searchResultIndex\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22romVersion\\\\x5C\\\\x22:\\\\x5C\\\\x2201.24.04\\\\x5C\\\\x22,\\\\x5C\\\\x22stationListSid\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22videoDuration\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22parentName\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22mark\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22videoSid\\\\x5C\\\\x22:\\\\x5C\\\\x22g68sacc3hjb2\\\\x5C\\\\x22,\\\\x5C\\\\x22locationIndex\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22omnibusSid\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22recommendType\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22path\\\\x5C\\\\x22:\\\\x5C\\\\x22home-watching_history\\\\x5C\\\\x22,\\\\x5C\\\\x22accountId\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22resolution\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22productModel\\\\x5C\\\\x22:\\\\x5C\\\\x22WTV43K1\\\\x5C\\\\x22,\\\\x5C\\\\x22positionType\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22weatherCode\\\\x5C\\\\x22:\\\\x5C\\\\x22101020100\\\\x5C\\\\x22},{\\\\x5C\\\\x22logVersion\\\\x5C\\\\x22:\\\\x5C\\\\x2202\\\\x5C\\\\x22,\\\\x5C\\\\x22logType\\\\x5C\\\\x22:\\\\x5C\\\\x22event\\\\x5C\\\\x22,\\\\x5C\\\\x22eventId\\\\x5C\\\\x22:\\\\x5C\\\\x22helios-player-sdk-getVideoInfo\\\\x5C\\\\x22,\\\\x5C\\\\x22happenTime\\\\x5C\\\\x22:1490934251559,\\\\x5C\\\\x22params\\\\x5C\\\\x22:{\\\\x5C\\\\x22appPackage\\\\x5C\\\\x22:\\\\x5C\\\\x22com.helios.vod\\\\x5C\\\\x22,\\\\x5C\\\\x22appVersion\\\\x5C\\\\x22:\\\\x5C\\\\x221.2.8\\\\x5C\\\\x22,\\\\x5C\\\\x22sdkVersion\\\\x5C\\\\x22:\\\\x5C\\\\x222.2.0\\\\x5C\\\\x22,\\\\x5C\\\\x22netType\\\\x5C\\\\x22:\\\\x5C\\\\x22wifi\\\\x5C\\\\x22,\\\\x5C\\\\x22videoSid\\\\x5C\\\\x22:\\\\x5C\\\\x22g6a1wxl7e5mn\\\\x5C\\\\x22,\\\\x5C\\\\x22videoName\\\\x5C\\\\x22:\\\\x5C\\\\x22鸡毛飞上天[42]\\\\x5C\\\\x22,\\\\x5C\\\\x22episodeSid\\\\x5C\\\\x22:\\\\x5C\\\\x22g68sacc3hjb2\\\\x5C\\\\x22,\\\\x5C\\\\x22contentType\\\\x5C\\\\x22:\\\\x5C\\\\x22tv\\\\x5C\\\\x22,\\\\x5C\\\\x22playType\\\\x5C\\\\x22:\\\\x5C\\\\x22vod\\\\x5C\\\\x22,\\\\x5C\\\\x22sourceList\\\\x5C\\\\x22:\\\\x5C\\\\x22sohu\\\\x5C\\\\x22,\\\\x5C\\\\x22startTime\\\\x5C\\\\x22:1490934251264,\\\\x5C\\\\x22endTime\\\\x5C\\\\x22:1490934251464,\\\\x5C\\\\x22playSessionId\\\\x5C\\\\x22:\\\\x5C\\\\x22762350f6-c2e8-4816-8c27-eeb30b2df1e6\\\\x5C\\\\x22,\\\\x5C\\\\x22BSSID\\\\x5C\\\\x22:\\\\x5C\\\\x2208:10:76:f9:8e:45\\\\x5C\\\\x22,\\\\x5C\\\\x22SSID\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x5C\\\\x5C\\\\x22888888\\\\x5C\\\\x5C\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22wifiModel\\\\x5C\\\\x22:\\\\x5C\\\\x2243569\\\\x5C\\\\x22,\\\\x5C\\\\x22RSSI\\\\x5C\\\\x22:\\\\x5C\\\\x22-46\\\\x5C\\\\x22,\\\\x5C\\\\x22ethMac\\\\x5C\\\\x22:\\\\x5C\\\\x22bc:14:ef:c1:1a:32\\\\x5C\\\\x22}},{\\\\x5C\\\\x22logVersion\\\\x5C\\\\x22:\\\\x5C\\\\x2202\\\\x5C\\\\x22,\\\\x5C\\\\x22logType\\\\x5C\\\\x22:\\\\x5C\\\\x22event\\\\x5C\\\\x22,\\\\x5C\\\\x22eventId\\\\x5C\\\\x22:\\\\x5C\\\\x22helios-player-sdk-inner_outer_auth_parse\\\\x5C\\\\x22,\\\\x5C\\\\x22happenTime\\\\x5C\\\\x22:1490934251971,\\\\x5C\\\\x22params\\\\x5C\\\\x22:{\\\\x5C\\\\x22phrase\\\\x5C\\\\x22:\\\\x5C\\\\x22innerAuth\\\\x5C\\\\x22,\\\\x5C\\\\x22appPackage\\\\x5C\\\\x22:\\\\x5C\\\\x22com.helios.vod\\\\x5C\\\\x22,\\\\x5C\\\\x22appVersion\\\\x5C\\\\x22:\\\\x5C\\\\x221.2.8\\\\x5C\\\\x22,\\\\x5C\\\\x22sdkVersion\\\\x5C\\\\x22:\\\\x5C\\\\x222.2.0\\\\x5C\\\\x22,\\\\x5C\\\\x22netType\\\\x5C\\\\x22:\\\\x5C\\\\x22wifi\\\\x5C\\\\x22,\\\\x5C\\\\x22videoSid\\\\x5C\\\\x22:\\\\x5C\\\\x22g6a1wxl7e5mn\\\\x5C\\\\x22,\\\\x5C\\\\x22videoName\\\\x5C\\\\x22:\\\\x5C\\\\x22鸡毛飞上天[42]\\\\x5C\\\\x22,\\\\x5C\\\\x22episodeSid\\\\x5C\\\\x22:\\\\x5C\\\\x22g68sacc3hjb2\\\\x5C\\\\x22,\\\\x5C\\\\x22contentType\\\\x5C\\\\x22:\\\\x5C\\\\x22tv\\\\x5C\\\\x22,\\\\x5C\\\\x22playType\\\\x5C\\\\x22:\\\\x5C\\\\x22vod\\\\x5C\\\\x22,\\\\x5C\\\\x22source\\\\x5C\\\\x22:\\\\x5C\\\\x22sohu\\\\x5C\\\\x22,\\\\x5C\\\\x22userType\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22videoType\\\\x5C\\\\x22:\\\\x5C\\\\x22free\\\\x5C\\\\x22,\\\\x5C\\\\x22startTime\\\\x5C\\\\x22:1490934251601,\\\\x5C\\\\x22endTime\\\\x5C\\\\x22:1490934251970,\\\\x5C\\\\x22playSessionId\\\\x5C\\\\x22:\\\\x5C\\\\x22762350f6-c2e8-4816-8c27-eeb30b2df1e6\\\\x5C\\\\x22,\\\\x5C\\\\x22result\\\\x5C\\\\x22:\\\\x5C\\\\x22success\\\\x5C\\\\x22,\\\\x5C\\\\x22errorCode\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22BSSID\\\\x5C\\\\x22:\\\\x5C\\\\x2208:10:76:f9:8e:45\\\\x5C\\\\x22,\\\\x5C\\\\x22SSID\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x5C\\\\x5C\\\\x22888888\\\\x5C\\\\x5C\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22wifiModel\\\\x5C\\\\x22:\\\\x5C\\\\x2243569\\\\x5C\\\\x22,\\\\x5C\\\\x22RSSI\\\\x5C\\\\x22:\\\\x5C\\\\x22-46\\\\x5C\\\\x22,\\\\x5C\\\\x22ethMac\\\\x5C\\\\x22:\\\\x5C\\\\x22bc:14:ef:c1:1a:32\\\\x5C\\\\x22}},{\\\\x5C\\\\x22logVersion\\\\x5C\\\\x22:\\\\x5C\\\\x2202\\\\x5C\\\\x22,\\\\x5C\\\\x22logType\\\\x5C\\\\x22:\\\\x5C\\\\x22event\\\\x5C\\\\x22,\\\\x5C\\\\x22eventId\\\\x5C\\\\x22:\\\\x5C\\\\x22helios-player-sdk-inner_outer_auth_parse\\\\x5C\\\\x22,\\\\x5C\\\\x22happenTime\\\\x5C\\\\x22:1490934252512,\\\\x5C\\\\x22params\\\\x5C\\\\x22:{\\\\x5C\\\\x22phrase\\\\x5C\\\\x22:\\\\x5C\\\\x22parse\\\\x5C\\\\x22,\\\\x5C\\\\x22appPackage\\\\x5C\\\\x22:\\\\x5C\\\\x22com.helios.vod\\\\x5C\\\\x22,\\\\x5C\\\\x22appVersion\\\\x5C\\\\x22:\\\\x5C\\\\x221.2.8\\\\x5C\\\\x22,\\\\x5C\\\\x22sdkVersion\\\\x5C\\\\x22:\\\\x5C\\\\x222.2.0\\\\x5C\\\\x22,\\\\x5C\\\\x22netType\\\\x5C\\\\x22:\\\\x5C\\\\x22wifi\\\\x5C\\\\x22,\\\\x5C\\\\x22videoSid\\\\x5C\\\\x22:\\\\x5C\\\\x22g6a1wxl7e5mn\\\\x5C\\\\x22,\\\\x5C\\\\x22videoName\\\\x5C\\\\x22:\\\\x5C\\\\x22鸡毛飞上天[42]\\\\x5C\\\\x22,\\\\x5C\\\\x22episodeSid\\\\x5C\\\\x22:\\\\x5C\\\\x22g68sacc3hjb2\\\\x5C\\\\x22,\\\\x5C\\\\x22contentType\\\\x5C\\\\x22:\\\\x5C\\\\x22tv\\\\x5C\\\\x22,\\\\x5C\\\\x22playType\\\\x5C\\\\x22:\\\\x5C\\\\x22vod\\\\x5C\\\\x22,\\\\x5C\\\\x22source\\\\x5C\\\\x22:\\\\x5C\\\\x22sohu\\\\x5C\\\\x22,\\\\x5C\\\\x22userType\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22videoType\\\\x5C\\\\x22:\\\\x5C\\\\x22free\\\\x5C\\\\x22,\\\\x5C\\\\x22startTime\\\\x5C\\\\x22:1490934251985,\\\\x5C\\\\x22endTime\\\\x5C\\\\x22:1490934252511,\\\\x5C\\\\x22playSessionId\\\\x5C\\\\x22:\\\\x5C\\\\x22762350f6-c2e8-4816-8c27-eeb30b2df1e6\\\\x5C\\\\x22,\\\\x5C\\\\x22result\\\\x5C\\\\x22:\\\\x5C\\\\x22success\\\\x5C\\\\x22,\\\\x5C\\\\x22errorCode\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22BSSID\\\\x5C\\\\x22:\\\\x5C\\\\x2208:10:76:f9:8e:45\\\\x5C\\\\x22,\\\\x5C\\\\x22SSID\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x5C\\\\x5C\\\\x22888888\\\\x5C\\\\x5C\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22wifiModel\\\\x5C\\\\x22:\\\\x5C\\\\x2243569\\\\x5C\\\\x22,\\\\x5C\\\\x22RSSI\\\\x5C\\\\x22:\\\\x5C\\\\x22-46\\\\x5C\\\\x22,\\\\x5C\\\\x22ethMac\\\\x5C\\\\x22:\\\\x5C\\\\x22bc:14:ef:c1:1a:32\\\\x5C\\\\x22}},{\\\\x5C\\\\x22logVersion\\\\x5C\\\\x22:\\\\x5C\\\\x2202\\\\x5C\\\\x22,\\\\x5C\\\\x22logType\\\\x5C\\\\x22:\\\\x5C\\\\x22event\\\\x5C\\\\x22,\\\\x5C\\\\x22eventId\\\\x5C\\\\x22:\\\\x5C\\\\x22helios-player-sdk-startPlay\\\\x5C\\\\x22,\\\\x5C\\\\x22happenTime\\\\x5C\\\\x22:1490934254521,\\\\x5C\\\\x22params\\\\x5C\\\\x22:{\\\\x5C\\\\x22appPackage\\\\x5C\\\\x22:\\\\x5C\\\\x22com.helios.vod\\\\x5C\\\\x22,\\\\x5C\\\\x22appVersion\\\\x5C\\\\x22:\\\\x5C\\\\x221.2.8\\\\x5C\\\\x22,\\\\x5C\\\\x22sdkVersion\\\\x5C\\\\x22:\\\\x5C\\\\x222.2.0\\\\x5C\\\\x22,\\\\x5C\\\\x22netType\\\\x5C\\\\x22:\\\\x5C\\\\x22wifi\\\\x5C\\\\x22,\\\\x5C\\\\x22videoSid\\\\x5C\\\\x22:\\\\x5C\\\\x22g6a1wxl7e5mn\\\\x5C\\\\x22,\\\\x5C\\\\x22videoName\\\\x5C\\\\x22:\\\\x5C\\\\x22鸡毛飞上天[42]\\\\x5C\\\\x22,\\\\x5C\\\\x22episodeSid\\\\x5C\\\\x22:\\\\x5C\\\\x22g68sacc3hjb2\\\\x5C\\\\x22,\\\\x5C\\\\x22contentType\\\\x5C\\\\x22:\\\\x5C\\\\x22tv\\\\x5C\\\\x22,\\\\x5C\\\\x22playType\\\\x5C\\\\x22:\\\\x5C\\\\x22vod\\\\x5C\\\\x22,\\\\x5C\\\\x22playerType\\\\x5C\\\\x22:\\\\x5C\\\\x22sys\\\\x5C\\\\x22,\\\\x5C\\\\x22source\\\\x5C\\\\x22:\\\\x5C\\\\x22sohu\\\\x5C\\\\x22,\\\\x5C\\\\x22definition\\\\x5C\\\\x22:\\\\x5C\\\\x22hd\\\\x5C\\\\x22,\\\\x5C\\\\x22userSwitch\\\\x5C\\\\x22:0,\\\\x5C\\\\x22autoSwitch\\\\x5C\\\\x22:0,\\\\x5C\\\\x22retryTimes\\\\x5C\\\\x22:0,\\\\x5C\\\\x22maxRetryTimes\\\\x5C\\\\x22:0,\\\\x5C\\\\x22playUrl\\\\x5C\\\\x22:\\\\x5C\\\\x22http:\\\\x5C\\\\x5C\\\\x5C/\\\\x5C\\\\x5C\\\\x5C/hot.vrs.sohu.com\\\\x5C\\\\x5C\\\\x5C/ipad3654750_4601253532904_6865071.m3u8?plat=6\\u0026prod=h5\\u0026uid=1490932370104826\\\\x5C\\\\x22,\\\\x5C\\\\x22userType\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22videoType\\\\x5C\\\\x22:\\\\x5C\\\\x22free\\\\x5C\\\\x22,\\\\x5C\\\\x22result\\\\x5C\\\\x22:\\\\x5C\\\\x22success\\\\x5C\\\\x22,\\\\x5C\\\\x22errorCode\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22startTime\\\\x5C\\\\x22:1490934252930,\\\\x5C\\\\x22endTime\\\\x5C\\\\x22:1490934254520,\\\\x5C\\\\x22playSessionId\\\\x5C\\\\x22:\\\\x5C\\\\x22762350f6-c2e8-4816-8c27-eeb30b2df1e6\\\\x5C\\\\x22,\\\\x5C\\\\x22startPlaySessionId\\\\x5C\\\\x22:\\\\x5C\\\\x2295816be5-878a-4222-98cb-14da2b17f8f5\\\\x5C\\\\x22,\\\\x5C\\\\x22BSSID\\\\x5C\\\\x22:\\\\x5C\\\\x2208:10:76:f9:8e:45\\\\x5C\\\\x22,\\\\x5C\\\\x22SSID\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x5C\\\\x5C\\\\x22888888\\\\x5C\\\\x5C\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22wifiModel\\\\x5C\\\\x22:\\\\x5C\\\\x2243569\\\\x5C\\\\x22,\\\\x5C\\\\x22RSSI\\\\x5C\\\\x22:\\\\x5C\\\\x22-42\\\\x5C\\\\x22,\\\\x5C\\\\x22ethMac\\\\x5C\\\\x22:\\\\x5C\\\\x22bc:14:ef:c1:1a:32\\\\x5C\\\\x22}},{\\\\x5C\\\\x22logVersion\\\\x5C\\\\x22:\\\\x5C\\\\x2202\\\\x5C\\\\x22,\\\\x5C\\\\x22logType\\\\x5C\\\\x22:\\\\x5C\\\\x22event\\\\x5C\\\\x22,\\\\x5C\\\\x22eventId\\\\x5C\\\\x22:\\\\x5C\\\\x22helios-player-sdk-buffer\\\\x5C\\\\x22,\\\\x5C\\\\x22happenTime\\\\x5C\\\\x22:1490934495346,\\\\x5C\\\\x22params\\\\x5C\\\\x22:{\\\\x5C\\\\x22appPackage\\\\x5C\\\\x22:\\\\x5C\\\\x22com.helios.vod\\\\x5C\\\\x22,\\\\x5C\\\\x22appVersion\\\\x5C\\\\x22:\\\\x5C\\\\x221.2.8\\\\x5C\\\\x22,\\\\x5C\\\\x22sdkVersion\\\\x5C\\\\x22:\\\\x5C\\\\x222.2.0\\\\x5C\\\\x22,\\\\x5C\\\\x22netType\\\\x5C\\\\x22:\\\\x5C\\\\x22wifi\\\\x5C\\\\x22,\\\\x5C\\\\x22videoSid\\\\x5C\\\\x22:\\\\x5C\\\\x22g6a1wxl7e5mn\\\\x5C\\\\x22,\\\\x5C\\\\x22videoName\\\\x5C\\\\x22:\\\\x5C\\\\x22鸡毛飞上天[42]\\\\x5C\\\\x22,\\\\x5C\\\\x22episodeSid\\\\x5C\\\\x22:\\\\x5C\\\\x22g68sacc3hjb2\\\\x5C\\\\x22,\\\\x5C\\\\x22contentType\\\\x5C\\\\x22:\\\\x5C\\\\x22tv\\\\x5C\\\\x22,\\\\x5C\\\\x22playType\\\\x5C\\\\x22:\\\\x5C\\\\x22vod\\\\x5C\\\\x22,\\\\x5C\\\\x22source\\\\x5C\\\\x22:\\\\x5C\\\\x22sohu\\\\x5C\\\\x22,\\\\x5C\\\\x22definition\\\\x5C\\\\x22:\\\\x5C\\\\x22hd\\\\x5C\\\\x22,\\\\x5C\\\\x22bufferType\\\\x5C\\\\x22:\\\\x5C\\\\x22play\\\\x5C\\\\x22,\\\\x5C\\\\x22videoTime\\\\x5C\\\\x22:238807,\\\\x5C\\\\x22startTime\\\\x5C\\\\x22:1490934493401,\\\\x5C\\\\x22endTime\\\\x5C\\\\x22:1490934495340,\\\\x5C\\\\x22playSessionId\\\\x5C\\\\x22:\\\\x5C\\\\x22762350f6-c2e8-4816-8c27-eeb30b2df1e6\\\\x5C\\\\x22,\\\\x5C\\\\x22startPlaySessionId\\\\x5C\\\\x22:\\\\x5C\\\\x2295816be5-878a-4222-98cb-14da2b17f8f5\\\\x5C\\\\x22,\\\\x5C\\\\x22BSSID\\\\x5C\\\\x22:\\\\x5C\\\\x2208:10:76:f9:8e:45\\\\x5C\\\\x22,\\\\x5C\\\\x22SSID\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x5C\\\\x5C\\\\x22888888\\\\x5C\\\\x5C\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22wifiModel\\\\x5C\\\\x22:\\\\x5C\\\\x2243569\\\\x5C\\\\x22,\\\\x5C\\\\x22RSSI\\\\x5C\\\\x22:\\\\x5C\\\\x22-42\\\\x5C\\\\x22,\\\\x5C\\\\x22ethMac\\\\x5C\\\\x22:\\\\x5C\\\\x22bc:14:ef:c1:1a:32\\\\x5C\\\\x22}},{\\\\x5C\\\\x22logVersion\\\\x5C\\\\x22:\\\\x5C\\\\x2202\\\\x5C\\\\x22,\\\\x5C\\\\x22logType\\\\x5C\\\\x22:\\\\x5C\\\\x22event\\\\x5C\\\\x22,\\\\x5C\\\\x22eventId\\\\x5C\\\\x22:\\\\x5C\\\\x22helios-player-sdk-buffer\\\\x5C\\\\x22,\\\\x5C\\\\x22happenTime\\\\x5C\\\\x22:1490934504882,\\\\x5C\\\\x22params\\\\x5C\\\\x22:{\\\\x5C\\\\x22appPackage\\\\x5C\\\\x22:\\\\x5C\\\\x22com.helios.vod\\\\x5C\\\\x22,\\\\x5C\\\\x22appVersion\\\\x5C\\\\x22:\\\\x5C\\\\x221.2.8\\\\x5C\\\\x22,\\\\x5C\\\\x22sdkVersion\\\\x5C\\\\x22:\\\\x5C\\\\x222.2.0\\\\x5C\\\\x22,\\\\x5C\\\\x22netType\\\\x5C\\\\x22:\\\\x5C\\\\x22wifi\\\\x5C\\\\x22,\\\\x5C\\\\x22videoSid\\\\x5C\\\\x22:\\\\x5C\\\\x22g6a1wxl7e5mn\\\\x5C\\\\x22,\\\\x5C\\\\x22videoName\\\\x5C\\\\x22:\\\\x5C\\\\x22鸡毛飞上天[42]\\\\x5C\\\\x22,\\\\x5C\\\\x22episodeSid\\\\x5C\\\\x22:\\\\x5C\\\\x22g68sacc3hjb2\\\\x5C\\\\x22,\\\\x5C\\\\x22contentType\\\\x5C\\\\x22:\\\\x5C\\\\x22tv\\\\x5C\\\\x22,\\\\x5C\\\\x22playType\\\\x5C\\\\x22:\\\\x5C\\\\x22vod\\\\x5C\\\\x22,\\\\x5C\\\\x22source\\\\x5C\\\\x22:\\\\x5C\\\\x22sohu\\\\x5C\\\\x22,\\\\x5C\\\\x22definition\\\\x5C\\\\x22:\\\\x5C\\\\x22hd\\\\x5C\\\\x22,\\\\x5C\\\\x22bufferType\\\\x5C\\\\x22:\\\\x5C\\\\x22play\\\\x5C\\\\x22,\\\\x5C\\\\x22videoTime\\\\x5C\\\\x22:246427,\\\\x5C\\\\x22startTime\\\\x5C\\\\x22:1490934502934,\\\\x5C\\\\x22endTime\\\\x5C\\\\x22:1490934504875,\\\\x5C\\\\x22playSessionId\\\\x5C\\\\x22:\\\\x5C\\\\x22762350f6-c2e8-4816-8c27-eeb30b2df1e6\\\\x5C\\\\x22,\\\\x5C\\\\x22startPlaySessionId\\\\x5C\\\\x22:\\\\x5C\\\\x2295816be5-878a-4222-98cb-14da2b17f8f5\\\\x5C\\\\x22,\\\\x5C\\\\x22BSSID\\\\x5C\\\\x22:\\\\x5C\\\\x2208:10:76:f9:8e:45\\\\x5C\\\\x22,\\\\x5C\\\\x22SSID\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x5C\\\\x5C\\\\x22888888\\\\x5C\\\\x5C\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22wifiModel\\\\x5C\\\\x22:\\\\x5C\\\\x2243569\\\\x5C\\\\x22,\\\\x5C\\\\x22RSSI\\\\x5C\\\\x22:\\\\x5C\\\\x22-42\\\\x5C\\\\x22,\\\\x5C\\\\x22ethMac\\\\x5C\\\\x22:\\\\x5C\\\\x22bc:14:ef:c1:1a:32\\\\x5C\\\\x22}}]\\\\x22,\\\\x22baseInfo\\\\x22:\\\\x22{\\\\x5C\\\\x22userId\\\\x5C\\\\x22:\\\\x5C\\\\x2295d61fccd505fba4eb4e2431ea502f8b\\\\x5C\\\\x22,\\\\x5C\\\\x22accountId\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22groupId\\\\x5C\\\\x22:\\\\x5C\\\\x2215891\\\\x5C\\\\x22,\\\\x5C\\\\x22weatherCode\\\\x5C\\\\x22:\\\\x5C\\\\x22101090801\\\\x5C\\\\x22,\\\\x5C\\\\x22productSN\\\\x5C\\\\x22:\\\\x5C\\\\x22KB1650BB002448O0A6\\\\x5C\\\\x22,\\\\x5C\\\\x22productModel\\\\x5C\\\\x22:\\\\x5C\\\\x22WTV43K1\\\\x5C\\\\x22,\\\\x5C\\\\x22romVersion\\\\x5C\\\\x22:\\\\x5C\\\\x2201.26.02\\\\x5C\\\\x22,\\\\x5C\\\\x22firmwareVersion\\\\x5C\\\\x22:\\\\x5C\\\\x22HELIOSR-01.26.02.1714402\\\\x5C\\\\x22,\\\\x5C\\\\x22uploadTime\\\\x5C\\\\x22:\\\\x5C\\\\x2220170511103045\\\\x5C\\\\x22,\\\\x5C\\\\x22androidVersion\\\\x5C\\\\x22:\\\\x5C\\\\x225.0.2\\\\x5C\\\\x22,\\\\x5C\\\\x22currentVipLevel\\\\x5C\\\\x22:\\\\x5C\\\\x22non-member\\\\x5C\\\\x22,\\\\x5C\\\\x22productLine\\\\x5C\\\\x22:\\\\x5C\\\\x22helios\\\\x5C\\\\x22,\\\\x5C\\\\x22sysPlatform\\\\x5C\\\\x22:\\\\x5C\\\\x22yunos\\\\x5C\\\\x22}\\\\x22,\\\\x22version\\\\x22:\\\\x2201\\\\x22,\\\\x22md5\\\\x22:\\\\x222c1eb798752b7ec41ad65d6c03ca852e\\\\x22}ySessionId\\\\x5C\\\\x22:\\\\x5C\\\\x2295816be5-878a-4222-98cb-14da2b17f8f5\\\\x5C\\\\x22,\\\\x5C\\\\x22BSSID\\\\x5C\\\\x22:\\\\x5C\\\\x2208:10:76:f9:8e:45\\\\x5C\\\\x22,\\\\x5C\\\\x22SSID\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x5C\\\\x5C\\\\x22888888\\\\x5C\\\\x5C\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22wifiModel\\\\x5C\\\\x22:\\\\x5C\\\\x2243569\\\\x5C\\\\x22,\\\\x5C\\\\x22RSSI\\\\x5C\\\\x22:\\\\x5C\\\\x22-42\\\\x5C\\\\x22,\\\\x5C\\\\x22ethMac\\\\x5C\\\\x22:\\\\x5C\\\\x22bc:14:ef:c1:1a:32\\\\x5C\\\\x22}},{\\\\x5C\\\\x22logVersion\\\\x5C\\\\x22:\\\\x5C\\\\x2202\\\\x5C\\\\x22,\\\\x5C\\\\x22logType\\\\x5C\\\\x22:\\\\x5C\\\\x22event\\\\x5C\\\\x22,\\\\x5C\\\\x22eventId\\\\x5C\\\\x22:\\\\x5C\\\\x22helios-player-sdk-buffer\\\\x5C\\\\x22,\\\\x5C\\\\x22happenTime\\\\x5C\\\\x22:1490934504882,\\\\x5C\\\\x22params\\\\x5C\\\\x22:{\\\\x5C\\\\x22appPackage\\\\x5C\\\\x22:\\\\x5C\\\\x22com.helios.vod\\\\x5C\\\\x22,\\\\x5C\\\\x22appVersion\\\\x5C\\\\x22:\\\\x5C\\\\x221.2.8\\\\x5C\\\\x22,\\\\x5C\\\\x22sdkVersion\\\\x5C\\\\x22:\\\\x5C\\\\x222.2.0\\\\x5C\\\\x22,\\\\x5C\\\\x22netType\\\\x5C\\\\x22:\\\\x5C\\\\x22wifi\\\\x5C\\\\x22,\\\\x5C\\\\x22videoSid\\\\x5C\\\\x22:\\\\x5C\\\\x22g6a1wxl7e5mn\\\\x5C\\\\x22,\\\\x5C\\\\x22videoName\\\\x5C\\\\x22:\\\\x5C\\\\x22鸡毛飞上天[42]\\\\x5C\\\\x22,\\\\x5C\\\\x22episodeSid\\\\x5C\\\\x22:\\\\x5C\\\\x22g68sacc3hjb2\\\\x5C\\\\x22,\\\\x5C\\\\x22contentType\\\\x5C\\\\x22:\\\\x5C\\\\x22tv\\\\x5C\\\\x22,\\\\x5C\\\\x22playType\\\\x5C\\\\x22:\\\\x5C\\\\x22vod\\\\x5C\\\\x22,\\\\x5C\\\\x22source\\\\x5C\\\\x22:\\\\x5C\\\\x22sohu\\\\x5C\\\\x22,\\\\x5C\\\\x22definition\\\\x5C\\\\x22:\\\\x5C\\\\x22hd\\\\x5C\\\\x22,\\\\x5C\\\\x22bufferType\\\\x5C\\\\x22:\\\\x5C\\\\x22play\\\\x5C\\\\x22,\\\\x5C\\\\x22videoTime\\\\x5C\\\\x22:246427,\\\\x5C\\\\x22startTime\\\\x5C\\\\x22:1490934502934,\\\\x5C\\\\x22endTime\\\\x5C\\\\x22:1490934504875,\\\\x5C\\\\x22playSessionId\\\\x5C\\\\x22:\\\\x5C\\\\x22762350f6-c2e8-4816-8c27-eeb30b2df1e6\\\\x5C\\\\x22,\\\\x5C\\\\x22startPlaySessionId\\\\x5C\\\\x22:\\\\x5C\\\\x2295816be5-878a-4222-98cb-14da2b17f8f5\\\\x5C\\\\x22,\\\\x5C\\\\x22BSSID\\\\x5C\\\\x22:\\\\x5C\\\\x2208:10:76:f9:8e:45\\\\x5C\\\\x22,\\\\x5C\\\\x22SSID\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x5C\\\\x5C\\\\x22888888\\\\x5C\\\\x5C\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22wifiModel\\\\x5C\\\\x22:\\\\x5C\\\\x2243569\\\\x5C\\\\x22,\\\\x5C\\\\x22RSSI\\\\x5C\\\\x22:\\\\x5C\\\\x22-42\\\\x5C\\\\x22,\\\\x5C\\\\x22ethMac\\\\x5C\\\\x22:\\\\x5C\\\\x22bc:14:ef:c1:1a:32\\\\x5C\\\\x22}}]\\\\x22,\\\\x22baseInfo\\\\x22:\\\\x22{\\\\x5C\\\\x22userId\\\\x5C\\\\x22:\\\\x5C\\\\x2295d61fccd505fba4eb4e2431ea502f8b\\\\x5C\\\\x22,\\\\x5C\\\\x22accountId\\\\x5C\\\\x22:\\\\x5C\\\\x22\\\\x5C\\\\x22,\\\\x5C\\\\x22groupId\\\\x5C\\\\x22:\\\\x5C\\\\x2215891\\\\x5C\\\\x22,\\\\x5C\\\\x22weatherCode\\\\x5C\\\\x22:\\\\x5C\\\\x22101090801\\\\x5C\\\\x22,\\\\x5C\\\\x22productSN\\\\x5C\\\\x22:\\\\x5C\\\\x22KB1650BB002448O0A6\\\\x5C\\\\x22,\\\\x5C\\\\x22productModel\\\\x5C\\\\x22:\\\\x5C\\\\x22WTV43K1\\\\x5C\\\\x22,\\\\x5C\\\\x22romVersion\\\\x5C\\\\x22:\\\\x5C\\\\x2201.26.02\\\\x5C\\\\x22,\\\\x5C\\\\x22firmwareVersion\\\\x5C\\\\x22:\\\\x5C\\\\x22HELIOSR-01.26.02.1714402\\\\x5C\\\\x22,\\\\x5C\\\\x22uploadTime\\\\x5C\\\\x22:\\\\x5C\\\\x2220170511103045\\\\x5C\\\\x22,\\\\x5C\\\\x22androidVersion\\\\x5C\\\\x22:\\\\x5C\\\\x225.0.2\\\\x5C\\\\x22,\\\\x5C\\\\x22currentVipLevel\\\\x5C\\\\x22:\\\\x5C\\\\x22non-member\\\\x5C\\\\x22,\\\\x5C\\\\x22productLine\\\\x5C\\\\x22:\\\\x5C\\\\x22helios\\\\x5C\\\\x22,\\\\x5C\\\\x22sysPlatform\\\\x5C\\\\x22:\\\\x5C\\\\x22yunos\\\\x5C\\\\x22}\\\\x22,\\\\x22version\\\\x22:\\\\x2201\\\\x22,\\\\x22md5\\\\x22:\\\\x222c1eb798752b7ec41ad65d6c03ca852e\\\\x22}}}\",\"type\":\"log\"}"
        val chain = new GenericProcessorChain()
        val confManager = new ConfManager(Array("GenericProcessorChain.xml"))
        chain.init(confManager)

        val bytes = msgText.getBytes
        val ret = chain.process(bytes)
        if (ret.hasErr) {
            if (ret.ex.isDefined) {
                ret.ex.get.printStackTrace()
            }
        }
        require(ret.hasErr == false)

        //println(ret.result.get.length)

        ret.result.get.foreach(item=>println(item.toJSONString))



    }
}
