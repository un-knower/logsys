import cn.whaley.bi.logsys.forest.StringUtil
import com.alibaba.fastjson.{JSON, JSONObject}
import org.junit.Test

/**
 * Created by fj on 17/4/23.
 */
class StringTest {

    @Test
    def test1(): Unit ={
        val text1 = "{\"@timestamp\":\"2017-04-10T10:19:55+08:00\",\"host\":\"10.10.219.224\",\"clientip\":\"179.197.216.90\",\"size\":166,\"responsetime\":0.347,\"upstreamtime\":\"-\",\"upstreamhost\":\"-\",\"http_host\":\"rec.moretv.com.cn\",\"url\":\"\\x91\\x00\\x00\\x00\\x22k\\x12\\x8B\\xC5<R\\x12$\\x8F#R\\x1D\\xFDW/\\x95\\xFBx\\xA7\\xBA\\x18\\x9C\\xD1\\x16t\\xD8\\xF6\\xFB\\x96\\xF8\\xEE\\xF9$\\xD4e\\x8B\\x86#\\xA3\\xC9Ct\\xB7\\x84\\xC9\\xB4jXh\\x11:\\xF4\\xED\\xAD\\xF4\\x97\\xFD\\xA9\\xD3\\xB1\\xB9\\xD6m\\xC3\\x8C\\xB0E4!>Z\\x9B\\xDC\\x1C\\xB4QX\\xB6\\xCD\\x07\\xEC\\x7F\\x8C\\xD23\\x05\\xC6\\x91\\x13\\x82\\xEDS4\\xCC\\xF2\\xB9\\xD49\\xF0Pw\\xBF\\x19uc\\xE6u[h$\\x86W\\xD7\\xCB\\xB8JAC.\\xCBz,\\xE8\\x8F\\xA1R\\xFDb\\x98\\xC9\\xBF\\xD8\\xC1\\xFB\\x88\\x9D7\\x07\\x17o\\x09\\xDB\\xEB\\x84\",\"xff\":\"-\",\"referer\":\"-\",\"agent\":\"-\",\"status\":\"400\"}"
        val obj=JSON.parseObject(text1)
        System.out.println(obj.toJSONString)
    }

    @Test
    def test2():Unit={
        //val byteStr = "\\x91\\x00\\x00\\x00\\x22k\\x12\\x8B\\xC5<R\\x12$\\x8F#R\\x1D\\xFDW/\\x95\\xFBx\\xA7\\xBA\\x18\\x9C\\xD1\\x16t\\xD8\\xF6\\xFB\\x96\\xF8\\xEE\\xF9$\\xD4e\\x8B\\x86#\\xA3\\xC9Ct\\xB7\\x84\\xC9\\xB4jXh\\x11:\\xF4\\xED\\xAD\\xF4\\x97\\xFD\\xA9\\xD3\\xB1\\xB9\\xD6m\\xC3\\x8C\\xB0E4!>Z\\x9B\\xDC\\x1C\\xB4QX\\xB6\\xCD\\x07\\xEC\\x7F\\x8C\\xD23\\x05\\xC6\\x91\\x13\\x82\\xEDS4\\xCC\\xF2\\xB9\\xD49\\xF0Pw\\xBF\\x19uc\\xE6u[h$\\x86W\\xD7\\xCB\\xB8JAC.\\xCBz,\\xE8\\x8F\\xA1R\\xFDb\\x98\\xC9\\xBF\\xD8\\xC1\\xFB\\x88\\x9D7\\x07\\x17o\\x09\\xDB\\xEB\\x84"

        val byteStr = "\\x91\\x00\\x00\\x00\\x22k\\x12\\x8B\\xC5<R\\x12$\\x8F#R\\x1D\\xFDW/\\x95\\xFBx\\xA7\\xBA\\x18\\x9C\\xD1\\x16t\\xD8\\xF6\\xFB\\x96\\xF8\\xEE\\xF9$\\xD4e\\x8B\\x86#\\xA3\\xC9Ct\\xB7\\x84\\xC9\\xB4jXh\\x11:\\xF4\\xED\\xAD\\xF4\\x97\\xFD\\xA9\\xD3\\xB1\\xB9\\xD6m\\xC3\\x8C\\xB0E4!>Z\\x9B\\xDC\\x1C\\xB4QX\\xB6\\xCD\\x07\\xEC\\x7F\\x8C\\xD23\\x05\\xC6\\x91\\x13\\x82\\xEDS4\\xCC\\xF2\\xB9\\xD49\\xF0Pw\\xBF\\x19uc\\xE6u[h$\\x86W\\xD7\\xCB\\xB8JAC.\\xCBz,\\xE8\\x8F\\xA1R\\xFDb\\x98\\xC9\\xBF\\xD8\\xC1\\xFB\\x88\\x9D7\\x07\\x17o\\x09\\xDB\\xEB\\x84"
        val bytes=StringUtil.decodeNgxStrToBytes(byteStr)
        println(new String(bytes,"UTF-8"))

    }


}
